<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Useful Scripts &mdash; eppy 0.5.44 documentation</title>
    
    <link rel="stylesheet" href="_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.5.44',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="eppy 0.5.44 documentation" href="index.html" />
    <link rel="next" title="Changes" href="changes.html" />
    <link rel="prev" title="Running EnergyPlus from Eppy" href="runningeplus.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="changes.html" title="Changes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="runningeplus.html" title="Running EnergyPlus from Eppy"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">eppy 0.5.44 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="useful-scripts">
<h1>Useful Scripts<a class="headerlink" href="#useful-scripts" title="Permalink to this headline">¶</a></h1>
<div class="section" id="location-of-the-scripts">
<h2>Location of the scripts<a class="headerlink" href="#location-of-the-scripts" title="Permalink to this headline">¶</a></h2>
<p>Here are some scripts that you may find useful. They are in the folder
&#8221;./eppy/useful_scripts&#8221;</p>
<p>And now for some housekeeping before we start off</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s2">&quot;../eppy/useful_scripts&quot;</span><span class="p">)</span>
<span class="c1"># changes directory, so we are where the scripts are located</span>
</pre></div>
</div>
<div class="code python highlight-python"><div class="highlight"><pre><span class="c1"># you would normaly install eppy by doing</span>
<span class="c1"># python setup.py install</span>
<span class="c1"># or</span>
<span class="c1"># pip install eppy</span>
<span class="c1"># or</span>
<span class="c1"># easy_install eppy</span>

<span class="c1"># if you have not done so, the following three lines are needed</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="c1"># pathnameto_eppy = &#39;c:/eppy&#39;</span>
<span class="n">pathnameto_eppy</span> <span class="o">=</span> <span class="s1">&#39;../../&#39;</span>
<span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">pathnameto_eppy</span><span class="p">)</span>
</pre></div>
</div>
<p>If you look in the folder &#8221;./eppy/useful_scripts&#8221;, you fill find the
following scripts</p>
<p>The scripts are:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="o">-</span> <span class="n">eppy_version</span><span class="o">.</span><span class="n">py</span>
<span class="o">-</span> <span class="n">idfdiff</span><span class="o">.</span><span class="n">py</span>
<span class="o">-</span> <span class="n">loopdiagram</span><span class="o">.</span><span class="n">py</span>
<span class="o">-</span> <span class="n">eppyreadtest_folder</span><span class="o">.</span><span class="n">py</span>
<span class="o">-</span> <span class="n">eppyreadtest_file</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
</div>
<div class="section" id="eppy-version-py">
<h2>eppy_version.py<a class="headerlink" href="#eppy-version-py" title="Permalink to this headline">¶</a></h2>
<p>Many scripts will print out some help information, if you use the &#8211;help
option. Let us try that</p>
<div class="code python highlight-python"><div class="highlight"><pre>%%bash
# ignore the line above. It simply lets me run a command line from ipython notebook
python eppy_version.py --help
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>usage: eppy_version.py [-h]

I print the current version of eppy. Being polite, I also say hello !

optional arguments:
  -h, --help  show this help message and exit
</pre></div>
</div>
<p>That was useful !</p>
<p>Now let us try running the program</p>
<div class="code python highlight-python"><div class="highlight"><pre>%%bash
# ignore the line above. It simply lets me run a command line from ipython notebook
python eppy_version.py
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>Hello! I am  eppy version 0.4.6.4a
</pre></div>
</div>
</div>
<div class="section" id="redirecting-output-to-a-file">
<h2>Redirecting output to a file<a class="headerlink" href="#redirecting-output-to-a-file" title="Permalink to this headline">¶</a></h2>
<p>Most scripts will print the output to a terminal. Sometimes we want to
send the output to a file, so that we can save it for posterity. We can
do that py using &#8220;&gt;&#8221; with the filename after that. For eppy_version.py,
it will look like this:</p>
<p>python eppy_version.py &gt; save_output.txt</p>
<p>Some of the following scripts will generate csv or html outputs. We can
direct the output to a file with .html extension and open it in a
browser</p>
</div>
<div class="section" id="compare-two-idf-files-idfdiff-py">
<h2>Compare two idf files - idfdiff.py<a class="headerlink" href="#compare-two-idf-files-idfdiff-py" title="Permalink to this headline">¶</a></h2>
<p>This script will compare two idf files. The results will be displayed
printed in &#8220;csv&#8221; format or in &#8220;html&#8221; format.</p>
<p>You would run the script from the command line. This would be the
terminal on Mac or unix, and the dos prompt on windows. Let us look at
the help for this script, by typing:</p>
<div class="code python highlight-python"><div class="highlight"><pre>%%bash
# ignore the line above. It simply lets me run a command line from ipython notebook
python idfdiff.py -h
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>usage: idfdiff.py [-h] (--csv | --html) idd file1 file2

Do a diff between two idf files. Prints the diff in csv or html file format.
You can redirect the output to a file and open the file using as a spreadsheet
or by using a browser

positional arguments:
  idd         location of idd file = ./somewhere/eplusv8-0-1.idd
  file1       location of first with idf files = ./somewhere/f1.idf
  file2       location of second with idf files = ./somewhere/f2.idf

optional arguments:
  -h, --help  show this help message and exit
  --csv
  --html
</pre></div>
</div>
<p>Now let us try this with two &#8220;idf&#8221; files that are slightly different. If
we open them in a file comparing software, it would look like this:</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">eppy.useful_scripts</span> <span class="kn">import</span> <span class="n">doc_images</span> <span class="c1">#no need to know this code, it just shows the image below</span>
<span class="n">for_images</span> <span class="o">=</span> <span class="n">doc_images</span>
<span class="n">for_images</span><span class="o">.</span><span class="n">display_png</span><span class="p">(</span><span class="n">for_images</span><span class="o">.</span><span class="n">filemerge</span><span class="p">)</span> <span class="c1"># display the image below</span>
</pre></div>
</div>
<img alt="_images/useful_scripts_21_0.png" src="_images/useful_scripts_21_0.png" />
<p>There are 4 differences between the files. Let us see what idfdiff.py
does with the two files. We will use the &#8211;html option to print out the
diff in html format.</p>
<div class="code python highlight-python"><div class="highlight"><pre>%%bash
# python idfdiff.py idd file1 file2
python idfdiff.py --html ../resources/iddfiles/Energy+V7_2_0.idd ../resources/idffiles/V_7_2/constructions.idf ../resources/idffiles/V_7_2/constructions_diff.idf
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>&lt;html&gt;&lt;p&gt;file1 = ../resources/idffiles/V_7_2/constructions.idf&lt;/p&gt;&lt;p&gt;file2 = ../resources/idffiles/V_7_2/constructions_diff.idf&lt;/p&gt;&lt;table border=&quot;1&quot;&gt;&lt;tr&gt;&lt;th&gt;Object Key&lt;/th&gt;&lt;th&gt; Object Name&lt;/th&gt;&lt;th&gt; Field Name&lt;/th&gt;&lt;th&gt; file1&lt;/th&gt;&lt;th&gt; file2&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;MATERIAL&lt;/td&gt;&lt;td&gt;F08 Metal surface&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;is here&lt;/td&gt;&lt;td&gt;not here&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;MATERIAL&lt;/td&gt;&lt;td&gt;F08 Metal surface haha&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;not here&lt;/td&gt;&lt;td&gt;is here&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;MATERIAL&lt;/td&gt;&lt;td&gt;G05 25mm wood&lt;/td&gt;&lt;td&gt;Conductivity&lt;/td&gt;&lt;td&gt;0.15&lt;/td&gt;&lt;td&gt;0.155&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;CONSTRUCTION&lt;/td&gt;&lt;td&gt;Exterior Door&lt;/td&gt;&lt;td&gt;Outside Layer&lt;/td&gt;&lt;td&gt;F08 Metal surface&lt;/td&gt;&lt;td&gt;F08 Metal surface haha&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/html&gt;
</pre></div>
</div>
<p>reprinting the output again for clarity:</p>
<p>&lt;html&gt;&lt;p&gt;file1 = ../resources/idffiles/V_7_2/constructions.idf&lt;/p&gt;&lt;p&gt;file2 = ../resources/idffiles/V_7_2/constructions_diff.idf&lt;/p&gt;&lt;table border=&#8221;1&#8221;&gt;&lt;tr&gt;&lt;th&gt;Object Key&lt;/th&gt;&lt;th&gt; Object Name&lt;/th&gt;&lt;th&gt; Field Name&lt;/th&gt;&lt;th&gt; file1&lt;/th&gt;&lt;th&gt; file2&lt;/th&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;MATERIAL&lt;/td&gt;&lt;td&gt;F08 Metal surface&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;not here&lt;/td&gt;&lt;td&gt;is here&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;MATERIAL&lt;/td&gt;&lt;td&gt;F08 Metal surface haha&lt;/td&gt;&lt;td&gt;&lt;/td&gt;&lt;td&gt;is here&lt;/td&gt;&lt;td&gt;not here&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;MATERIAL&lt;/td&gt;&lt;td&gt;G05 25mm wood&lt;/td&gt;&lt;td&gt;Conductivity&lt;/td&gt;&lt;td&gt;0.15&lt;/td&gt;&lt;td&gt;0.155&lt;/td&gt;&lt;/tr&gt;&lt;tr&gt;&lt;td&gt;CONSTRUCTION&lt;/td&gt;&lt;td&gt;Exterior Door&lt;/td&gt;&lt;td&gt;Outside Layer&lt;/td&gt;&lt;td&gt;F08 Metal surface&lt;/td&gt;&lt;td&gt;F08 Metal surface haha&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/html&gt;</p>
<p>It does look like html :-). We need to redirect this output to a file
and then open the file in a browser to see what it looks like. Displayed
below is the html file</p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">eppy.useful_scripts</span> <span class="kn">import</span> <span class="n">doc_images</span> <span class="c1">#no need to know this code, it just shows the image below</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">HTML</span>
<span class="n">h</span> <span class="o">=</span> <span class="n">HTML</span><span class="p">(</span><span class="nb">open</span><span class="p">(</span><span class="n">doc_images</span><span class="o">.</span><span class="n">idfdiff_path</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
<span class="n">h</span>
</pre></div>
</div>
<html><p>file1 = ../resources/idffiles/V_7_2/constr.idf</p><p>file2 = ../resources/idffiles/V_7_2/constr_diff.idf</p><table border="1"><tr><th>Object Key</th><th> Object Name</th><th> Field Name</th><th> file1</th><th> file2</th></tr><tr><td>CONSTRUCTION</td><td>CLNG-1</td><td>Outside Layer</td><td>MAT-CLNG-1</td><td>MAT-CLNG-8</td></tr><tr><td>CONSTRUCTION</td><td>GARAGE-SLAB-1</td><td></td><td>is here</td><td>not here</td></tr><tr><td>CONSTRUCTION</td><td>SB-E</td><td></td><td>is here</td><td>not here</td></tr><tr><td>CONSTRUCTION</td><td>SB-U</td><td></td><td>not here</td><td>is here</td></tr><tr><td>OUTPUTCONTROL:TABLE:STYLE</td><td> </td><td>Column Separator</td><td>HTML</td><td>CSV</td></tr></table></html><p>Pretty straight forward. Scroll up and look at the origin text files,
and see how idfdiff.py understands the difference</p>
<p>Now let us try the same thin in csv format</p>
<div class="code python highlight-python"><div class="highlight"><pre>%%bash
# python idfdiff.py idd file1 file2
python idfdiff.py --csv ../resources/iddfiles/Energy+V7_2_0.idd ../resources/idffiles/V_7_2/constr.idf ../resources/idffiles/V_7_2/constr_diff.idf
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>file1 = ../resources/idffiles/V_7_2/constr.idf
file2 = ../resources/idffiles/V_7_2/constr_diff.idf

Object Key, Object Name, Field Name, file1, file2
CONSTRUCTION,CLNG-1,Outside Layer,MAT-CLNG-1,MAT-CLNG-8
CONSTRUCTION,GARAGE-SLAB-1,,is here,not here
CONSTRUCTION,SB-E,,is here,not here
CONSTRUCTION,SB-U,,not here,is here
OUTPUTCONTROL:TABLE:STYLE, ,Column Separator,HTML,CSV
</pre></div>
</div>
<p>We see the same output, but now in csv format. You can redirect it to a
&#8221;.csv&#8221; file and open it up as a spreadsheet</p>
</div>
<div class="section" id="loopdiagram-py">
<h2>loopdiagram.py<a class="headerlink" href="#loopdiagram-py" title="Permalink to this headline">¶</a></h2>
<div class="section" id="diagrams-of-hvac-loops">
<h3>Diagrams of HVAC loops<a class="headerlink" href="#diagrams-of-hvac-loops" title="Permalink to this headline">¶</a></h3>
<p>This script will draw all the loops in an idf file. It is a bit of a
hack. So it will work on most files, but sometimes it will not :-(. But
it is pretty useful when it works.</p>
<p>If it does not work, send us the idf file and we&#8217;ll try to fix the code</p>
<p>Make sure <a class="reference external" href="http://www.research.att.com/sw/tools/graphviz/">grapphviz</a>
is installed for this script to work</p>
<p>Again, we&#8217;ll have to run the script from the terminal. Let us look at
the help for this script</p>
<div class="code python highlight-python"><div class="highlight"><pre>%%bash
# ignore the line above. It simply lets me run a command line from ipython notebook
python loopdiagram.py --help
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>usage: loopdiagram.py [-h] idd file

draw all the  loops in the idf file
There are two output files saved in the same location as the idf file:
- idf_file_location/idf_filename.dot
- idf_file_location/idf_filename.png

positional arguments:
  idd         location of idd file = ./somewhere/eplusv8-0-1.idd
  file        location of idf file = ./somewhere/f1.idf

optional arguments:
  -h, --help  show this help message and exit
</pre></div>
</div>
<p>Pretty straightforward. Simply open png file and you will see the loop
diagram. (ignore the dot file for now. it will be documented later)</p>
<p>So let us try this out with and simple example file. We have a very
simple plant loop in &#8221;../resources/idffiles/V_7_2/plantloop.idf&#8221;</p>
<div class="code python highlight-python"><div class="highlight"><pre>%%bash
# ignore the line above. It simply lets me run a command line from ipython notebook
python loopdiagram.py ../resources/iddfiles/Energy+V7_2_0.idd ../resources/idffiles/V_7_2/plantloop.idf
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>constructing the loops
cleaning edges
making the diagram
saved file: ../resources/idffiles/V_7_2/plantloop.dot
saved file: ../resources/idffiles/V_7_2/plantloop.png
</pre></div>
</div>
<p>The script prints out it&#8217;s progress. On larger files, this might take a
few seconds. If we open this file, it will look like the diagram below</p>
<p><em>Note: the supply and demnd sides are not connected in the diagram, but
shown seperately for clarity</em></p>
<div class="code python highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">eppy.useful_scripts</span> <span class="kn">import</span> <span class="n">doc_images</span> <span class="c1">#no need to know this code, it just shows the image below</span>
<span class="n">for_images</span> <span class="o">=</span> <span class="n">doc_images</span>
<span class="n">for_images</span><span class="o">.</span><span class="n">display_png</span><span class="p">(</span><span class="n">for_images</span><span class="o">.</span><span class="n">plantloop</span><span class="p">)</span> <span class="c1"># display the image below</span>
</pre></div>
</div>
<img alt="_images/useful_scripts_38_0.png" src="_images/useful_scripts_38_0.png" />
<p>That diagram is not a real system. Does this script really work ?</p>
<p>Try it yourself. Draw the daigram for
&#8221;../resources/idffiles/V_7_2/5ZoneCAVtoVAVWarmestTempFlow.idf&#8221;</p>
</div>
<div class="section" id="names-in-loopdiagrams">
<h3>Names in loopdiagrams<a class="headerlink" href="#names-in-loopdiagrams" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><a class="reference external" href="http://www.designbuilder.co.uk">Designbuilder</a> is an energyplus
editor autogenerates object names like &#8220;MyHouse:SAPZone1&#8221;</li>
<li>Note the &#8221;:&#8221; in the name.</li>
<li>Unfortunatley &#8221;:&#8221; is a reserved character when making a loop
diagrams. (eppy uses pydot and grapphviz which has this constraint)</li>
<li>to work around this, loopdiagram will replace all &#8221;:&#8221; with a &#8220;__&#8221;</li>
<li>So the names in the diagram will not match the names in your file,
but you can make out what is going on</li>
</ul>
</div>
</div>
<div class="section" id="eppyreadtest-folder-py">
<h2>eppyreadtest_folder.py<a class="headerlink" href="#eppyreadtest-folder-py" title="Permalink to this headline">¶</a></h2>
<p>Not yet documented</p>
</div>
<div class="section" id="eppyreadtest-file-py">
<h2>eppyreadtest_file.py<a class="headerlink" href="#eppyreadtest-file-py" title="Permalink to this headline">¶</a></h2>
<p>Not yet documented</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Useful Scripts</a><ul>
<li><a class="reference internal" href="#location-of-the-scripts">Location of the scripts</a></li>
<li><a class="reference internal" href="#eppy-version-py">eppy_version.py</a></li>
<li><a class="reference internal" href="#redirecting-output-to-a-file">Redirecting output to a file</a></li>
<li><a class="reference internal" href="#compare-two-idf-files-idfdiff-py">Compare two idf files - idfdiff.py</a></li>
<li><a class="reference internal" href="#loopdiagram-py">loopdiagram.py</a><ul>
<li><a class="reference internal" href="#diagrams-of-hvac-loops">Diagrams of HVAC loops</a></li>
<li><a class="reference internal" href="#names-in-loopdiagrams">Names in loopdiagrams</a></li>
</ul>
</li>
<li><a class="reference internal" href="#eppyreadtest-folder-py">eppyreadtest_folder.py</a></li>
<li><a class="reference internal" href="#eppyreadtest-file-py">eppyreadtest_file.py</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="runningeplus.html"
                        title="previous chapter">Running EnergyPlus from Eppy</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="changes.html"
                        title="next chapter">Changes</a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/useful_scripts.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="changes.html" title="Changes"
             >next</a> |</li>
        <li class="right" >
          <a href="runningeplus.html" title="Running EnergyPlus from Eppy"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">eppy 0.5.44 documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &copy; Copyright 2013, Santosh Philip.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.5.
    </div>
  </body>
</html>